<!--
  Generated template for the QuestionnairePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>{{constants.LANGS.PAGE_TITLE_CHOOSE_CONSUMPTION}}</ion-title>
    <ion-buttons end *ngIf="currentQuestionIndex==questions.length-1">
      <default-button block [text]="constants.LANGS.LABEL_SUBMIT" [attr.disabled]="!questionnaire.answers[questions[currentQuestionIndex].id]"
        text-uppercase (click)="openSummary()"></default-button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <!-- {{ questions[currentQuestionIndex].title }} -->
  <!-- TRUE FALSE QUESTION -->
  <div *ngIf=" questions.length>0 && questions[currentQuestionIndex].type == QUESTION_TYPE_TRUE_FALSE" class="true-false-container">

    <div class="question-1">{{ questions[currentQuestionIndex].question }} 
      <img alt="" class="info info-icon" *ngIf="questions[currentQuestionIndex].description" (click)="showInfo($event, questions[currentQuestionIndex].description)"
        src="assets/icon/info.png">
      </div>
    <div class="true-false-option" (click)="addAnswer(questions[currentQuestionIndex], true)" [ngClass]="{'gradient-option': questionnaire.answers[questions[currentQuestionIndex].id] && questionnaire.answers[questions[currentQuestionIndex].id].value.toLowerCase() != 'no' }">
      <span>{{constants.LANGS.LABEL_A}}</span> {{constants.LANGS.LABEL_YES}}
    </div>
    <div (click)="addAnswer(questions[currentQuestionIndex], false)" [ngClass]="{'gradient-option': questionnaire.answers[questions[currentQuestionIndex].id] && questionnaire.answers[questions[currentQuestionIndex].id].value.toLowerCase() == 'no'}"
      class="true-false-option">
      <span>{{constants.LANGS.LABEL_B}}</span> {{constants.LANGS.LABEL_NO}}
    </div>
  </div>

  <!-- MULTI CHOICE QUESTION -->
  <div *ngIf="questions.length>0 && questions[currentQuestionIndex].type == QUESTION_TYPE_MULTI_OPTIONS" class="drop-container">
    <div class="gradient-option" (click)="openMultiChoicePopover($event, questions[currentQuestionIndex])">
      <div class="label">{{constants.LANGS.LABEL_A}}</div>
      <div class="question">{{questions[currentQuestionIndex].question}}</div>
      <img alt="" class="info info-icon" [ngStyle]="{'visibility':(!questions[currentQuestionIndex].description?'hidden':'visible')}" (click)="showInfo($event, questions[currentQuestionIndex].description)" src="assets/icon/info.png">
      <img alt="" class="dropdown" src="assets/icon/dropdown.svg">
    </div>
  </div>

</ion-content>


<ion-footer *ngIf="questions.length>0">
  <ion-toolbar>
    <ion-buttons left>
      <button ion-button round (click)="changeQuestion(currentQuestionIndex-1)" [disabled]="currentQuestionIndex==0">
        <img alt="" class="arrow" src="assets/icon/page-arrow.svg">
      </button>
      <!-- <button ion-button round>&lt;</button> -->
    </ion-buttons>
    <ion-title text-center>{{currentQuestionIndex+1}}/{{questions.length}}</ion-title>

    <ion-buttons end>
      <button ion-button round (click)="changeQuestion(currentQuestionIndex+1)" [disabled]="currentQuestionIndex==questions.length-1 || !questionnaire.answers[questions[currentQuestionIndex].id]">
        <img alt="" class="arrow arrow-right" src="assets/icon/page-arrow.svg">
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
